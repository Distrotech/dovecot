RFC2180 describes several ways to handle multiple client access in same
mailbox. Here's how we've implemented them.

DELETE and RENAME commands work always, other clients that had the mailbox
selected are disconnected next time they try to use a selected-state
command.

FETCH command sends replies to all non-expunged messages and if any
expunged messages were referenced, replies with a tagged NO.

STORE with .SILENT silently ignores expunged messages. Without .SILENT it's
handled the same way as FETCH.

SEARCH ignores expunged messages.

COPY fails if any of the given messages were expunged. Messages copied
until the failure is noticed are currently left to destination mailbox -
this may change later.
